(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e95a5"],{"8cbf":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"diy_edit page_application_for_studying_abroad",attrs:{id:"application_for_studying_abroad_edit"}},[t("div",{staticClass:"warp"},[t("div",{staticClass:"container"},[t("div",{staticClass:"row diy_edit_content_box"},[e.$check_field("set","name_of_institution")||e.$check_field("add","name_of_institution")||e.$check_field("get","name_of_institution")?t("div",{staticClass:"form-item col-12 col-md-6"},[e._m(0),t("div",{staticClass:"diy_field diy_text"},[e.form["name_of_institution"]&&e.$check_field("set","name_of_institution")||!e.form["name_of_institution"]&&e.$check_field("add","name_of_institution")?t("input",{directives:[{name:"model",rawName:"v-model",value:e.form["name_of_institution"],expression:"form['name_of_institution']"}],attrs:{type:"text",id:"form_name_of_institution",placeholder:"请输入院校名称",disabled:e.disabledObj["name_of_institution_isDisabled"]},domProps:{value:e.form["name_of_institution"]},on:{input:function(t){t.target.composing||e.$set(e.form,"name_of_institution",t.target.value)}}}):e.$check_field("get","name_of_institution")?t("span",[e._v(e._s(e.form["${obj.name}"]))]):e._e()])]):e._e(),e.$check_field("set","major_name")||e.$check_field("add","major_name")||e.$check_field("get","major_name")?t("div",{staticClass:"form-item col-12 col-md-6"},[e._m(1),t("div",{staticClass:"diy_field diy_text"},[e.form["major_name"]&&e.$check_field("set","major_name")||!e.form["major_name"]&&e.$check_field("add","major_name")?t("input",{directives:[{name:"model",rawName:"v-model",value:e.form["major_name"],expression:"form['major_name']"}],attrs:{type:"text",id:"form_major_name",placeholder:"请输入专业名称",disabled:e.disabledObj["major_name_isDisabled"]},domProps:{value:e.form["major_name"]},on:{input:function(t){t.target.composing||e.$set(e.form,"major_name",t.target.value)}}}):e.$check_field("get","major_name")?t("span",[e._v(e._s(e.form["${obj.name}"]))]):e._e()])]):e._e(),e.$check_field("set","tuition_information")||e.$check_field("add","tuition_information")||e.$check_field("get","tuition_information")?t("div",{staticClass:"form-item col-12 col-md-6"},[e._m(2),t("div",{staticClass:"diy_field diy_text"},[e.form["tuition_information"]&&e.$check_field("set","tuition_information")||!e.form["tuition_information"]&&e.$check_field("add","tuition_information")?t("input",{directives:[{name:"model",rawName:"v-model",value:e.form["tuition_information"],expression:"form['tuition_information']"}],attrs:{type:"text",id:"form_tuition_information",placeholder:"请输入学费信息",disabled:e.disabledObj["tuition_information_isDisabled"]},domProps:{value:e.form["tuition_information"]},on:{input:function(t){t.target.composing||e.$set(e.form,"tuition_information",t.target.value)}}}):e.$check_field("get","tuition_information")?t("span",[e._v(e._s(e.form["${obj.name}"]))]):e._e()])]):e._e(),e.$check_field("set","declaration_personnel")||e.$check_field("add","declaration_personnel")||e.$check_field("get","declaration_personnel")?t("div",{staticClass:"form-item col-12 col-md-6"},[e._m(3),t("div",{staticClass:"diy_field diy_down"},[e.form["declaration_personnel"]&&e.$check_field("set","declaration_personnel")||!e.form["declaration_personnel"]&&e.$check_field("add","declaration_personnel")?t("select",{directives:[{name:"model",rawName:"v-model",value:e.form["declaration_personnel"],expression:"form['declaration_personnel']"}],attrs:{id:"form_declaration_personnel",disabled:e.disabledObj["declaration_personnel_isDisabled"]},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.form,"declaration_personnel",t.target.multiple?i:i[0])}}},e._l(e.list_user_declaration_personnel,(function(i){return t("option",{domProps:{value:i["user_id"]}},[e._v(" "+e._s(i["nickname"]+"-"+i["username"])+" ")])})),0):e.$check_field("get","declaration_personnel")?t("span",[e._v(e._s(e.form["declaration_personnel"]))]):e._e()])]):e._e(),e.$check_field("set","student_name")||e.$check_field("add","student_name")||e.$check_field("get","student_name")?t("div",{staticClass:"form-item col-12 col-md-6"},[e._m(4),t("div",{staticClass:"diy_field diy_text"},[e.form["student_name"]&&e.$check_field("set","student_name")||!e.form["student_name"]&&e.$check_field("add","student_name")?t("input",{directives:[{name:"model",rawName:"v-model",value:e.form["student_name"],expression:"form['student_name']"}],attrs:{type:"text",id:"form_student_name",placeholder:"请输入学生姓名",disabled:e.disabledObj["student_name_isDisabled"]},domProps:{value:e.form["student_name"]},on:{input:function(t){t.target.composing||e.$set(e.form,"student_name",t.target.value)}}}):e.$check_field("get","student_name")?t("span",[e._v(e._s(e.form["${obj.name}"]))]):e._e()])]):e._e(),e.$check_field("set","date_of_declaration")||e.$check_field("add","date_of_declaration")||e.$check_field("get","date_of_declaration")?t("div",{staticClass:"form-item col-12 col-md-6"},[e._m(5),t("div",{staticClass:"diy_field diy_date"},[e.form["date_of_declaration"]&&e.$check_field("set","date_of_declaration")||!e.form["date_of_declaration"]&&e.$check_field("add","date_of_declaration")?t("input",{directives:[{name:"model",rawName:"v-model",value:e.form["date_of_declaration"],expression:"form['date_of_declaration']"}],attrs:{type:"date",disabled:e.disabledObj["date_of_declaration_isDisabled"],id:"form_date_of_declaration",placeholder:"请输入申报日期"},domProps:{value:e.form["date_of_declaration"]},on:{input:function(t){t.target.composing||e.$set(e.form,"date_of_declaration",t.target.value)}}}):e.$check_field("get","date_of_declaration")?t("span",[e._v(e._s(e.form["${obj.name}"]))]):e._e()])]):e._e(),e.$check_field("set","application_materials")||e.$check_field("add","application_materials")||e.$check_field("get","application_materials")?t("div",{staticClass:"form-item col-12 col-md-6"},[e._m(6),t("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"form_file_application_materials",title:"application_materials"},on:{change:function(t){return e.change_file(t.target.files,"application_materials")}}}),e.form["application_materials"]&&e.$check_field("set","application_materials")?t("div",{staticClass:"diy_field diy_img"},[t("label",{attrs:{for:"form_file_application_materials"}},[t("a",{staticStyle:{color:"rgb(64, 158, 255)"},attrs:{href:e.$fullUrl(e.form["application_materials"]),target:"_blank"}},[e._v("点击下载")])])]):!e.form["application_materials"]&&e.$check_field("add","application_materials")?t("div",{staticClass:"diy_field diy_img"},[e._m(7)]):e.$check_field("get","application_materials")?t("div",{staticClass:"diy_field diy_img"},[t("span",[e._v(e._s(e.form["application_materials"])+" ")])]):e._e()]):e._e(),e.$check_field("set","contact_information")||e.$check_field("add","contact_information")||e.$check_field("get","contact_information")?t("div",{staticClass:"form-item col-12 col-md-6"},[e._m(8),t("div",{staticClass:"diy_field diy_text"},[e.form["contact_information"]&&e.$check_field("set","contact_information")||!e.form["contact_information"]&&e.$check_field("add","contact_information")?t("input",{directives:[{name:"model",rawName:"v-model",value:e.form["contact_information"],expression:"form['contact_information']"}],attrs:{type:"text",id:"form_contact_information",placeholder:"请输入联系方式",disabled:e.disabledObj["contact_information_isDisabled"]},domProps:{value:e.form["contact_information"]},on:{input:function(t){t.target.composing||e.$set(e.form,"contact_information",t.target.value)}}}):e.$check_field("get","contact_information")?t("span",[e._v(e._s(e.form["${obj.name}"]))]):e._e()])]):e._e(),e.$check_field("set","e_mail_address")||e.$check_field("add","e_mail_address")||e.$check_field("get","e_mail_address")?t("div",{staticClass:"form-item col-12 col-md-6"},[e._m(9),t("div",{staticClass:"diy_field diy_text"},[e.form["e_mail_address"]&&e.$check_field("set","e_mail_address")||!e.form["e_mail_address"]&&e.$check_field("add","e_mail_address")?t("input",{directives:[{name:"model",rawName:"v-model",value:e.form["e_mail_address"],expression:"form['e_mail_address']"}],attrs:{type:"text",id:"form_e_mail_address",placeholder:"请输入邮箱地址",disabled:e.disabledObj["e_mail_address_isDisabled"]},domProps:{value:e.form["e_mail_address"]},on:{input:function(t){t.target.composing||e.$set(e.form,"e_mail_address",t.target.value)}}}):e.$check_field("get","e_mail_address")?t("span",[e._v(e._s(e.form["${obj.name}"]))]):e._e()])]):e._e(),e.$check_field("set","remarks")||e.$check_field("add","remarks")||e.$check_field("get","remarks")?t("div",{staticClass:"form-item col-12 col-md-6"},[e._m(10),t("div",{staticClass:"diy_field diy_desc"},[e.form["remarks"]&&e.$check_field("set","remarks")||!e.form["remarks"]&&e.$check_field("add","remarks")?t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form["remarks"],expression:"form['remarks']"}],attrs:{id:"form_remarks",disabled:e.disabledObj["remarks_isDisabled"]},domProps:{value:e.form["remarks"]},on:{input:function(t){t.target.composing||e.$set(e.form,"remarks",t.target.value)}}}):e.$check_field("get","remarks")?t("span",[e._v(e._s(e.form["${obj.name}"]))]):e._e()])]):e._e(),"管理员"===e.user_group||e.$check_examine()?t("div",{staticClass:"form-item col-12 col-md-6"},[e._m(11),e.$check_action("/application_for_studying_abroad/edit","examine")?t("div",{staticClass:"diy_field diy_select"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.form["examine_state"],expression:"form['examine_state']"}],on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.form,"examine_state",t.target.multiple?i:i[0])}}},[t("option",{attrs:{value:"未审核"}},[e._v(" 未审核 ")]),t("option",{attrs:{value:"已通过"}},[e._v(" 已通过 ")]),t("option",{attrs:{value:"未通过"}},[e._v(" 未通过 ")])])]):t("div",{staticClass:"diy_field diy_text"},[t("span",[e._v(" "+e._s(e.form["examine_state"])+" ")])])]):e._e(),"管理员"===e.user_group||e.$check_examine()?t("div",{staticClass:"form-item col-12 col-md-6"},[e._m(12),e.$check_action("/application_for_studying_abroad/edit","examine")?t("div",{staticClass:"diy_field diy_desc"},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form["examine_reply"],expression:"form['examine_reply']"}],domProps:{value:e.form["examine_reply"]},on:{input:function(t){t.target.composing||e.$set(e.form,"examine_reply",t.target.value)}}})]):t("div",{staticClass:"diy_field diy_text"},[t("span",[e._v(" "+e._s(e.form["examine_reply"])+" ")])])]):e._e()]),t("div",{staticClass:"diy_edit_submit_box row"},[t("div",{staticClass:"col-12"},[t("div",{staticClass:"btn_box"},[t("button",{staticClass:"btn_submit",on:{click:function(t){return e.submit()}}},[e._v("提交")])])])])])])])},o=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"diy_title"},[t("span",[e._v(" 院校名称: ")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"diy_title"},[t("span",[e._v(" 专业名称: ")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"diy_title"},[t("span",[e._v(" 学费信息: ")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"diy_title"},[t("span",[e._v(" 申报人员: ")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"diy_title"},[t("span",[e._v(" 学生姓名: ")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"diy_title"},[t("span",[e._v(" 申报日期: ")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"diy_title"},[t("span",[e._v(" 申报材料: ")])])},function(){var e=this,t=e._self._c;return t("label",{attrs:{for:"form_file_application_materials"}},[t("div",{staticClass:"btn_add_img"},[t("span",[e._v("+")])])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"diy_title"},[t("span",[e._v(" 联系方式: ")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"diy_title"},[t("span",[e._v(" 邮箱地址: ")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"diy_title"},[t("span",[e._v(" 备注信息: ")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"diy_title"},[t("span",[e._v(" 审核状态: ")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"diy_title"},[t("span",[e._v(" 审核回复: ")])])}],s=i("c6e7"),n={mixins:[s["a"]],components:{},data(){return{url_get_obj:"~/api/application_for_studying_abroad/get_obj?",url_add:"~/api/application_for_studying_abroad/add?",url_set:"~/api/application_for_studying_abroad/set?",oauth:{signIn:!0,user_group:[]},query:{name_of_institution:"",major_name:"",tuition_information:"",declaration_personnel:0,student_name:"",date_of_declaration:"",application_materials:"",contact_information:"",e_mail_address:"",remarks:"",application_for_studying_abroad_id:0},obj:{name_of_institution:"",major_name:"",tuition_information:"",declaration_personnel:0,student_name:"",date_of_declaration:(new Date).getTime(),application_materials:"",contact_information:"",e_mail_address:"",remarks:"",examine_state:"未审核",examine_reply:"",application_for_studying_abroad_id:0},form:{name_of_institution:"",major_name:"",tuition_information:"",declaration_personnel:0,student_name:"",date_of_declaration:(new Date).getTime(),application_materials:"",contact_information:"",e_mail_address:"",remarks:"",examine_state:"未审核",examine_reply:"",application_for_studying_abroad_id:0},disabledObj:{name_of_institution_isDisabled:!1,major_name_isDisabled:!1,tuition_information_isDisabled:!1,declaration_personnel_isDisabled:!1,student_name_isDisabled:!1,date_of_declaration_isDisabled:!1,application_materials_isDisabled:!1,contact_information_isDisabled:!1,e_mail_address_isDisabled:!1,remarks_isDisabled:!1},list_user_declaration_personnel:[],field:"application_for_studying_abroad_id"}},methods:{async get_list_user_declaration_personnel(){var e=await this.$get("~/api/user/get_list?user_group=学生用户");e.result&&e.result.list?this.list_user_declaration_personnel=e.result.list:e.error&&console.error(e.error)},async get_user_session_declaration_personnel(){var e=this,t=await this.$get("~/api/user_group/get_obj?name=学生用户");if(t.result&&t.result.obj){var i=t.result.obj.source_table,a=e.$store.state.user.user_id;if(a){var o="~/api/"+i+"/get_obj?";this.$get(o,{user_id:e.$store.state.user.user_id},(function(t){if(t.result&&t.result.obj){var i=[];for(let e in t.result.obj)i.push(e);var o=[];for(let t in e.form)o.push(t);e.form["declaration_personnel"]=a,e.disabledObj["declaration_personnel_isDisabled"]=!0;for(var s=0;s<i.length;s++)if("examine_state"!==i[s]&&"examine_reply"!==i[s])for(var n=0;n<o.length;n++)if(i[s]===o[n]&&"declaration_personnel"!==i[s]){e.form[o[n]]=t.result.obj[i[s]],e.disabledObj[o[n]+"_isDisabled"]=!0;break}}}))}}else t.error&&console.error(t.error)},change_file(e,t){var i=new FormData;i.append("file",e[0]),this.$post("~/api/application_for_studying_abroad/upload?",i,e=>{e.result?this.form[t]=e.result.url:e.error&&this.$toast(e.error.message)})},get_obj_before(e){var t=$.db.get("form");if(t){var i=[];for(let e in t)i.push(e);var a=[];for(let e in this.form)a.push(e);for(var o=0;o<i.length;o++)if("examine_state"!==i[o]&&"examine_reply"!==i[o])for(var s=0;s<a.length;s++)if(a[s]===i[o]){this.form[a[s]]=t[i[o]],this.obj[a[s]]=t[i[o]],this.disabledObj[a[s]+"_isDisabled"]=!0;break}}return-1===JSON.stringify(this.form["date_of_declaration"]).indexOf("-")&&(this.form["date_of_declaration"]=this.$toTime(parseInt(this.form["date_of_declaration"]),"yyyy-MM-dd")),$.db.del("form"),e},get_obj_after(e,t){t&&t(e)}},created(){this.get_user_session_declaration_personnel(),this.get_list_user_declaration_personnel()}},r=n,_=i("0b56"),d=Object(_["a"])(r,a,o,!1,null,null,null);t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-2d0e95a5.4e85672a.js.map